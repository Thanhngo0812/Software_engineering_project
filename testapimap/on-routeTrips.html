<!DOCTYPE html>
<html>
<head>
    <title>On-Route Trips</title>
    <style>
        body {
        font-family: Arial, sans-serif;
        background: #f5f6fa;
        margin: 0;
        padding: 20px;
        font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
        }

        .dashboard-card {
        display: flex;
        background: #fff;
        border-radius: 10px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        padding: 20px;
        gap: 20px;
        align-items: center;
        }

        .left {
        flex: 1;
        text-align: center;
        color: #555;
        }

        .no-trips {
        margin-top: 20px;
        color: #888;
        }

        .right {
        flex: 2;
        }

        #map {
        width: 100%;
        height: 300px; /* ch·ªânh chi·ªÅu cao theo √Ω mu·ªën */
        border-radius: 10px;
        }
    </style>
</head>
<body>
    <div class="dashboard-card">
        <div class="left">
        <h3 style="position: fixed; top: 0px; left: 0px; padding-left: 30px; padding-top: 15px ;">On-Route Trips</h3>
        <div class="no-trips">
            <!-- icon bus demo -->
            <div style="font-size:60px;">üöå</div>
            <p>No on-route trips</p>
        </div>
        </div>

        <div class="right">
        <!-- ƒê√¢y l√† n∆°i Google Maps s·∫Ω render -->
        <div id="map"></div>
        </div>
    </div>
 <script>
    // Khai b√°o bi·∫øn to√†n c·ª•c
    let map;
    let busMarker;
    let routeCoordinates; // M·∫£ng l∆∞u tr·ªØ l·ªô tr√¨nh
    let currentIndex = 0; // Ch·ªâ s·ªë hi·ªán t·∫°i c·ªßa v·ªã tr√≠ tr√™n l·ªô tr√¨nh

    // L·ªô tr√¨nh m·∫´u (sample route) ·ªü TP.HCM
    // L·∫•y m·ªôt s·ªë ƒëi·ªÉm g·∫ßn nhau ƒë·ªÉ m√¥ ph·ªèng xe ƒëang ch·∫°y
    routeCoordinates = [
        { lat: 10.8231, lng: 106.6297 }, // ƒêi·ªÉm xu·∫•t ph√°t (TP.HCM)
        { lat: 10.8250, lng: 106.6350 },
        { lat: 10.8260, lng: 106.6400 },
        { lat: 10.8270, lng: 106.6450 },
        { lat: 10.8280, lng: 106.6500 },
        { lat: 10.8290, lng: 106.6550 },
        { lat: 10.8295, lng: 106.6600 }  // ƒêi·ªÉm cu·ªëi
    ];

    function initMap() {
        const initialPosition = routeCoordinates[0]; // B·∫Øt ƒë·∫ßu t·ª´ ƒëi·ªÉm ƒë·∫ßu ti√™n
        
        // T·∫°o ƒë·ªëi t∆∞·ª£ng b·∫£n ƒë·ªì
        map = new google.maps.Map(document.getElementById('map'), {
            zoom: 12,      
            center: initialPosition 
        });

        // Kh·ªüi t·∫°o Marker v·ªõi icon t√πy ch·ªânh (·∫£nh Naruto c·ªßa b·∫°n ho·∫∑c ·∫£nh xe bu√Ωt)
        busMarker = new google.maps.Marker({
            position: initialPosition,
            map: map,
            title: 'Xe Bu√Ωt ƒêang Theo D√µi',
            icon: {
                // Thay th·∫ø URL n√†y b·∫±ng ·∫£nh xe bu√Ωt c·ªßa b·∫°n (URL tr·ª±c ti·∫øp)
                url: './bus-icon.png', 
                scaledSize: new google.maps.Size(40, 40)
            }
        });

        // B·∫Øt ƒë·∫ßu di chuy·ªÉn Marker sau khi b·∫£n ƒë·ªì ƒë√£ t·∫£i
        startBusMovement();
    }
    
    // H√†m x·ª≠ l√Ω vi·ªác di chuy·ªÉn Marker
    function moveMarker() {
        // Ki·ªÉm tra xem ƒë√£ ƒëi h·∫øt l·ªô tr√¨nh ch∆∞a
        if (currentIndex < routeCoordinates.length) {
            const nextPosition = routeCoordinates[currentIndex];
            
            // 1. C·∫≠p nh·∫≠t v·ªã tr√≠ m·ªõi cho Marker
            busMarker.setPosition(nextPosition);
            
            // 2. C·∫≠p nh·∫≠t trung t√¢m b·∫£n ƒë·ªì theo xe bu√Ωt (T√πy ch·ªçn)
            map.setCenter(nextPosition);
            
            // TƒÉng ch·ªâ s·ªë ƒë·ªÉ l·∫•y v·ªã tr√≠ ti·∫øp theo ·ªü l·∫ßn l·∫∑p sau
            currentIndex++;
        } else {
            // Khi xe bu√Ωt ƒëi h·∫øt l·ªô tr√¨nh, b·∫Øt ƒë·∫ßu l·∫°i (ho·∫∑c d·ª´ng l·∫°i)
            currentIndex = 0; 
        }
    }

    // H√†m thi·∫øt l·∫≠p v√≤ng l·∫∑p di chuy·ªÉn
    function startBusMovement() {
        // S·ª≠ d·ª•ng setInterval ƒë·ªÉ g·ªçi h√†m moveMarker() m·ªói 1000ms (1 gi√¢y)
        // Trong h·ªá th·ªëng th·ª±c t·∫ø, b·∫°n s·∫Ω thay th·∫ø v√≤ng l·∫∑p n√†y b·∫±ng d·ªØ li·ªáu GPS th·ªùi gian th·ª±c
        setInterval(moveMarker, 1000); // Di chuy·ªÉn sau m·ªói 1 gi√¢y
    }
</script>
    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD9voBEmWYHSA01ICS6ACzw-sLXwrwZNHs&callback=initMap">
    </script>
</body>
</html>